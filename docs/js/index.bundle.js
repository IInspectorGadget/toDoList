!function(){const e=document.querySelector("#add"),t=document.querySelector("#list"),o=document.querySelector("#list-item-tmp"),l=document.querySelector("#select-all"),d=document.querySelector("#items-count"),c=document.querySelector("#clear"),r=document.querySelectorAll("#filter > li a"),i=()=>{!k.length-p()?l.checked=!1:l.checked=!0},n=e=>{localStorage.setItem("itemList",JSON.stringify(e))},a=e=>{(13===e.keyCode||void 0===e.keyCode)&&e.target.value.trim().length>0&&(k.push({id:Math.random(),task:e.target.value.trim(),completed:!1}),e.target.value="",n(k),m(),i())},s=(e,t,o,l)=>{13===e.keyCode||void 0===e.keyCode?"boolean"==typeof l?(t[o]=l,n(k),m()):l.trim().length>0?(t[o]=l.trim(),n(k),m()):u(t.id):27===e.keyCode&&m()},u=e=>{k=k.filter((t=>e!==t.id)),n(k),m()},p=()=>k.reduce(((e,t)=>e+!t.completed),0),m=()=>{t.innerHTML="";const e=window.location.href.substring(window.location.href.lastIndexOf("#")+1),l=((e,t)=>"active"===e?t.filter((e=>!1===e.completed)):"completed"===e?t.filter((e=>!0===e.completed)):t)(e,k);(e=>{for(const t of r)t.getAttribute("data-type")!==e?(t.classList.remove("toDoApp__sort-link_select"),["active","completed"].includes(e)||"all"!==t.getAttribute("data-type")||t.classList.add("toDoApp__sort-link_select")):t.classList.add("toDoApp__sort-link_select")})(e);for(const e of l){const l=o.content.cloneNode(!0),d=l.querySelector(".toDoApp__label"),c=l.querySelector(".toDoApp__select"),r=l.querySelector(".toDoApp__edit-input"),n=l.querySelector(".toDoApp__delete");r.value=e.task,d.innerHTML=e.task,d.setAttribute("data-id",e.id),c.checked=e.completed,n.addEventListener("click",(()=>{u(e.id),i()})),d.addEventListener("dblclick",(()=>{r.style.display="block",r.focus(),r.addEventListener("blur",(t=>{s(t,e,"task",r.value)})),r.addEventListener("keyup",(t=>{27===t.keyCode&&(r.value=e.task),27!==t.keyCode&&13!==t.keyCode||r.blur()}))})),c.addEventListener("change",(t=>{s(t,e,"completed",c.checked),i()})),t.prepend(l)}d.innerHTML=`${p()} item left`};l.addEventListener("change",(e=>{for(const t of k)s(e,t,"completed",e.target.checked)})),window.onhashchange=m;let k=JSON.parse(localStorage.getItem("itemList")||"[]");i(),m(),e.addEventListener("blur",a),e.addEventListener("keyup",a),c.addEventListener("click",(()=>{k=k.filter((e=>!e.completed)),n(k),m()}))}();