!function(){const e=document.querySelector("#add"),t=document.querySelector("#list"),o=document.querySelector("#list-item-tmp"),l=document.querySelector("#select-all"),c=document.querySelector("#items-count"),d=document.querySelector("#clear"),r=document.querySelectorAll("#filter > li a"),n=e=>{localStorage.setItem("itemList",JSON.stringify(e))},a=e=>{(13===e.keyCode||void 0===e.keyCode)&&e.target.value.trim().length>0&&(m.push({id:Math.random(),task:e.target.value.trim(),completed:!1}),e.target.value="",n(m),p())},i=(e,t,o,l)=>{13===e.keyCode||void 0===e.keyCode?"boolean"==typeof l?(t[o]=l,n(m),p()):l.trim().length>0?(t[o]=l.trim(),n(m),p()):s(t.id):27===e.keyCode&&p()},s=e=>{m=m.filter((t=>e!==t.id)),n(m),p()},u=()=>m.reduce(((e,t)=>e+!t.completed),0),p=()=>{t.innerHTML="";const e=window.location.href.substring(window.location.href.lastIndexOf("#")+1),d=((e,t)=>"active"===e?t.filter((e=>!1===e.completed)):"completed"===e?t.filter((e=>!0===e.completed)):t)(e,m);(e=>{for(const t of r)t.getAttribute("data-type")!==e?(t.classList.remove("toDoApp__sort-link_select"),["active","completed"].includes(e)||"all"!==t.getAttribute("data-type")||t.classList.add("toDoApp__sort-link_select")):t.classList.add("toDoApp__sort-link_select")})(e);for(const e of d){const c=o.content.cloneNode(!0),d=c.querySelector(".toDoApp__label"),r=c.querySelector(".toDoApp__select"),n=c.querySelector(".toDoApp__edit-input"),a=c.querySelector(".toDoApp__delete");n.value=e.task,d.innerHTML=e.task,d.setAttribute("data-id",e.id),r.checked=e.completed,a.addEventListener("click",(()=>s(e.id))),d.addEventListener("dblclick",(()=>{n.style.display="block",n.focus(),n.addEventListener("blur",(t=>{i(t,e,"task",n.value)})),n.addEventListener("keyup",(t=>{27===t.keyCode&&(n.value=e.task),27!==t.keyCode&&13!==t.keyCode||n.blur()}))})),r.addEventListener("change",(t=>{i(t,e,"completed",r.checked),u()!==m.length?l.checked=!1:l.checked=!0})),t.prepend(c)}c.innerHTML=`${u()} item left`};l.addEventListener("change",(e=>{for(const t of m)i(e,t,"completed",e.target.checked),localStorage.setItem("selectAllButtonState",e.target.checked)})),window.onhashchange=p;let m=JSON.parse(localStorage.getItem("itemList")||"[]");l.checked=JSON.parse(localStorage.getItem("selectAllButtonState"))||!1,p(),e.addEventListener("blur",a),e.addEventListener("keyup",a),d.addEventListener("click",(()=>{m=m.filter((e=>!e.completed)),n(m),p()}))}();