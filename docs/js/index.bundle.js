!function(){const e=document.querySelector("#add"),t=document.querySelector("#list"),o=document.querySelector("#list-item-tmp"),c=document.querySelector("#select-all"),l=document.querySelector("#items-count"),n=document.querySelector("#clear"),d=document.querySelectorAll("#filter > li a");function r(e){const t=JSON.stringify(e);localStorage.setItem("itemList",t)}function i(e){(13===e.keyCode||void 0===e.keyCode)&&e.target.value.trim().length>0&&(u.push({id:Math.random(),task:e.target.value.trim(),completed:!1}),e.target.value="",r(u),s())}function a(e,t,o,c){(13===e.keyCode||void 0===e.keyCode)&&e.target.value.length>0&&(t[o]=c,r(u),s())}function s(){t.innerHTML="",p=0;const e=window.location.href.substring(window.location.href.lastIndexOf("#/")+2),c=function(e,t){return"active"===e?t.filter((e=>!1===e.completed)):"completed"===e?t.filter((e=>!0===e.completed)):t}(e,u);!function(e){for(const t of d)t.getAttribute("data-type")!=e?(t.classList.remove("toDoApp__sort-link_select"),["active","completed"].includes(e)||"all"!=t.getAttribute("data-type")||t.classList.add("toDoApp__sort-link_select")):t.classList.add("toDoApp__sort-link_select")}(e);for(const e of c){const c=o.content.cloneNode(!0),l=c.querySelector(".toDoApp__label"),n=c.querySelector(".toDoApp__select"),d=c.querySelector(".toDoApp__edit-input"),i=c.querySelector(".toDoApp__delete");d.value=e.task,l.innerHTML=e.task,l.setAttribute("data-id",e.id),n.checked=e.completed,n.checked&&(p+=1),i.addEventListener("click",(()=>{u=u.filter((t=>e.id!=t.id)),r(u),s()})),l.addEventListener("dblclick",(()=>{d.style.display="block",d.focus(),d.addEventListener("blur",(t=>{a(t,e,"task",d.value)})),d.addEventListener("keyup",a)})),n.addEventListener("change",(t=>{n.checked?p+=1:p-=1,a(t,e,"completed",n.checked)})),t.append(c)}l.innerHTML=`${p} item left`}c.addEventListener("change",(e=>{for(const t of u)a(e,t,"completed",e.target.checked),localStorage.setItem("selectAllButtonState",e.target.checked)})),window.onhashchange=s;let u=JSON.parse(localStorage.getItem("itemList")||"[]"),p=0;!function(){const e=JSON.parse(localStorage.getItem("selectAllButtonState"))||!1;c.checked=e}(),s(),e.addEventListener("blur",i),e.addEventListener("keyup",i),n.addEventListener("click",(function(){u=[],r(u),s()}))}();