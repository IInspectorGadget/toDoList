!function(){const e=document.querySelector("#add"),t=document.querySelector("#list"),o=document.querySelector("#list-item-tmp"),c=document.querySelector("#select-all"),n=document.querySelector("#items-count"),l=document.querySelector("#clear"),i=document.querySelectorAll("#filter > li a");function d(e){const t=JSON.stringify(e);localStorage.setItem("itemList",t)}function r(e){(13===e.keyCode||void 0===e.keyCode)&&e.target.value.trim().length>0&&(p.push({id:Math.random(),task:e.target.value.trim(),completed:!1}),e.target.value="",d(p),u())}function a(e,t,o,c){13!==e.keyCode&&void 0!==e.keyCode||(c.trim().length>0?(t[o]=c.trim(),d(p),u()):s(t.id))}function s(e){p=p.filter((t=>e!=t.id)),d(p),u()}function u(){t.innerHTML="",m=0;const e=window.location.href.substring(window.location.href.lastIndexOf("#/")+2),c=function(e,t){return"active"===e?t.filter((e=>!1===e.completed)):"completed"===e?t.filter((e=>!0===e.completed)):t}(e,p);!function(e){for(const t of i)t.getAttribute("data-type")!=e?(t.classList.remove("toDoApp__sort-link_select"),["active","completed"].includes(e)||"all"!=t.getAttribute("data-type")||t.classList.add("toDoApp__sort-link_select")):t.classList.add("toDoApp__sort-link_select")}(e);for(const e of c){const c=o.content.cloneNode(!0),n=c.querySelector(".toDoApp__label"),l=c.querySelector(".toDoApp__select"),i=c.querySelector(".toDoApp__edit-input"),d=c.querySelector(".toDoApp__delete");i.value=e.task,n.innerHTML=e.task,n.setAttribute("data-id",e.id),l.checked=e.completed,l.checked&&(m+=1),d.addEventListener("click",(()=>s(e.id))),n.addEventListener("dblclick",(()=>{i.style.display="block",i.focus(),i.addEventListener("blur",(t=>{a(t,e,"task",i.value)})),i.addEventListener("keyup",(t=>{a(t,e,"task",i.value)}))})),l.addEventListener("change",(t=>{l.checked?m+=1:m-=1,a(t,e,"completed",l.checked)})),t.append(c)}n.innerHTML=`${m} item left`}c.addEventListener("change",(e=>{for(const t of p)a(e,t,"completed",e.target.checked),localStorage.setItem("selectAllButtonState",e.target.checked)})),window.onhashchange=u;let p=JSON.parse(localStorage.getItem("itemList")||"[]"),m=0;!function(){const e=JSON.parse(localStorage.getItem("selectAllButtonState"))||!1;c.checked=e}(),u(),e.addEventListener("blur",r),e.addEventListener("keyup",r),l.addEventListener("click",(function(){p=[],d(p),u()}))}();